---
- name: Rollback WAR deployment
  hosts: wildfly
  become: yes

  tasks:
    - name: Restore old WAR (if exists)
      shell: cp /opt/backup/sampleapp.war /opt/wildfly/standalone/deployments/sampleapp.war
      ignore_errors: yes

    - name: Restart WildFly
      service:
        name: wildfly
        state: restarted
